<!DOCTYPE html>
<html lang="ro">
  <head>
    <meta charset="UTF-8" />
    <title>Agendă simplă</title>
    <style>
      body {
        font-family: system-ui, sans-serif;
        margin: 2rem;
      }
      form {
        display: flex;
        gap: 0.5rem;
        margin: 1rem 0;
      }
      input,
      button {
        padding: 0.5rem 0.75rem;
      }
      table {
        border-collapse: collapse;
        width: 100%;
        max-width: 640px;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 0.5rem 0.75rem;
      }
      th {
        background: #f5f5f5;
        text-align: left;
      }
      .error {
        color: #b00020;
        margin-top: 0.25rem;
      }
      .actions button {
        padding: 0.25rem 0.5rem;
      }
    </style>
  </head>
  <body>
    <h1>Agendă</h1>

    <!-- Formular: Nume + Telefon -->
    <form id="form">
      <input type="text" id="nume" placeholder="Nume" />
      <input type="tel" id="telefon" placeholder="Telefon" />
      <button type="submit">Adaugă</button>
    </form>
    <div id="msg" class="error"></div>

    <!-- Tabel: Nume, Telefon -->
    <table>
      <thead>
        <tr>
          <th>Nume</th>
          <th>Telefon</th>
          <th>Acțiuni</th>
        </tr>
      </thead>
      <tbody id="contacts"></tbody>
    </table>

    <script>
      window.onload = () => {
        const form = document.getElementById("form");
        const inputNume = document.getElementById("nume");
        const inputTelefon = document.getElementById("telefon");
        const tbody = document.getElementById("contacts");
        const msg = document.getElementById("msg");

        // (opțional) încărcare din localStorage
        const load = () => JSON.parse(localStorage.getItem("contacts") || "[]");
        const save = (data) =>
          localStorage.setItem("contacts", JSON.stringify(data));
        let contacts = load();
        render();

        form.onsubmit = (e) => {
          e.preventDefault();
          msg.textContent = "";

          const nume = inputNume.value.trim();
          const tel = inputTelefon.value.trim();

          // Validare simplă
          if (!nume || !tel) {
            msg.textContent = "Completează Nume și Telefon.";
            return;
          }
          // Ex. validare minimă pentru telefon (doar cifre + + - spații)
          if (!/^[\d\s+\-()]{6,}$/.test(tel)) {
            msg.textContent = "Introdu un număr de telefon valid.";
            return;
          }
          // Evită duplicate (același nume + telefon)
          const exists = contacts.some(
            (c) =>
              c.nume.toLowerCase() === nume.toLowerCase() && c.telefon === tel
          );
          if (exists) {
            msg.textContent = "Acest contact există deja.";
            return;
          }

          contacts.push({ nume, telefon: tel });
          save(contacts);
          render();
          form.reset();
          inputNume.focus();
        };

        function render() {
          tbody.innerHTML = "";
          contacts.forEach((c, idx) => {
            const tr = document.createElement("tr");

            const tdNume = document.createElement("td");
            tdNume.textContent = c.nume;

            const tdTel = document.createElement("td");
            tdTel.textContent = c.telefon;

            const tdAct = document.createElement("td");
            tdAct.className = "actions";

            const btnDel = document.createElement("button");
            btnDel.type = "button";
            btnDel.textContent = "Șterge";
            btnDel.onclick = () => {
              contacts.splice(idx, 1);
              save(contacts);
              render();
            };

            tdAct.appendChild(btnDel);
            tr.appendChild(tdNume);
            tr.appendChild(tdTel);
            tr.appendChild(tdAct);
            tbody.appendChild(tr);
          });
        }
      };
    </script>
  </body>
</html>
